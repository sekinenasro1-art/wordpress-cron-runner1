name: üöÄ Auto-Open WordPress Pages
on:
  schedule:
    # Runs every 5 minutes, 24/7
    - cron: '*/5 * * * *'
  # Allows manual triggering
  workflow_dispatch:

jobs:
  open-pages:
    runs-on: ubuntu-latest
    steps:
      - name: üîÑ Start automatic page opening
        run: |
          echo "=============================================="
          echo "üöÄ STARTING AUTOMATIC PAGE OPENING"
          echo "Time: $(date)"
          echo "=============================================="
          
      - name: üìÑ Open First Page
        run: |
          echo "1Ô∏è‚É£ OPENING: https://tst1.xo.je/?wp_automatic=cron"
          start_time=$(date +%s)
          
          # Open first page with detailed logging
          response=$(curl -s -k -L -o /dev/null \
            -w "HTTP Status: %{http_code} | Time: %{time_total}s | Size: %{size_download} bytes" \
            "https://tst1.xo.je/?wp_automatic=cron" 2>&1 || echo "ERROR: Request failed")
          
          end_time=$(date +%s)
          duration=$((end_time - start_time))
          
          echo "‚úÖ RESULT: $response"
          echo "‚è±Ô∏è  DURATION: ${duration}s"
          echo "---"

      - name: ‚è≥ Wait 5 Seconds
        run: |
          echo "‚è≥ Waiting 5 seconds between pages..."
          sleep 5
          echo "---"

      - name: üìÑ Open Second Page  
        run: |
          echo "2Ô∏è‚É£ OPENING: https://tst1.xo.je/wp-cron.php"
          start_time=$(date +%s)
          
          # Open second page with detailed logging
          response=$(curl -s -k -L -o /dev/null \
            -w "HTTP Status: %{http_code} | Time: %{time_total}s | Size: %{size_download} bytes" \
            "https://tst1.xo.je/wp-cron.php?doing_wp_cron%20%3E%20/dev/null%202%3E&1" 2>&1 || echo "ERROR: Request failed")
          
          end_time=$(date +%s)
          duration=$((end_time - start_time))
          
          echo "‚úÖ RESULT: $response"
          echo "‚è±Ô∏è  DURATION: ${duration}s"
          echo "---"

      - name: ‚úÖ Completion Summary
        run: |
          echo "=============================================="
          echo "üéâ AUTOMATIC EXECUTION COMPLETED SUCCESSFULLY"
          echo "Time: $(date)"
          echo "Next run: In 5 minutes"
          echo "=============================================="
